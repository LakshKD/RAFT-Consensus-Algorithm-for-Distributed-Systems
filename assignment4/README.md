Name:- Lakshya Kumar
Roll Number:- 153050051

Problem Definition

In this assignment we have to combine a simple Network Filesystem Server with the RaftNode so that the clients will be able to send the commands like read, write, compare & swap(cas), delete and all the changes because of these commands will get replicated to all the servers using Raft consensus Algorithm.



Code Description:- 

Server.go file

-> Contains the client handler that will listen to the commands of the clients and send the command to the Raftnode. Raftnode will take the command and if it is a leader then the command will be replicated to the log of the leader and the other 4 followers that are present in the cluster. 
If the raftnode is not a leader then a redirect message is generated by the raftnode and it will send a redirect message to the client along with the leaderID. First the current connection of the client gets closed and then using the leaderID the client finds the port and then tries to connect to the client handler at the leader's raftnode. After connecting to the client handler at the current leader raftnode the client is able to send the commands and receive the responses. There is a function in this file, i.e, File_Map(). In this function the message from the commit channel of the raftnode is obtained and if it is redirect message then the client is sent the redirected message and if it is not a redirect message then the File.Map() call the ProcessMsg() function that is present inside the fs.go(file system)

-> Inside the main function raftnode gets created and after creation the servermain() function is called that itself calls the serve function which is client handler.

fs.go and msg.go in fs Folder

-> These two files constitutes the filesystem map that process the message received from the commit channel of the leader's Raftnode and send the response back to the client handler. Every client has different client handler each having a unique Id. So there is a Filesystem Map that stores the channel along with the client handlerID. So the response is sent back to the correct client by the client hanlder once it gets back the response from the File_Map() function in server.go

-> Each client Handler has unique-Id and channel that will help the Filesystem map to send the response.

Raftmachine.go

-> This file contains the code of the statemachine that will generate the actions for the raftnode to execute. It is the core part of the whole Raft consensus algorithm. It will help to generate the responses corresponding to different request like AppendEntryReq, VoteRequest, etc.... 

Rafnode.go

-> Raftnode will help to communicate will other nodes in the cluster and it is the resonsibility of Raftnode to send the actions generated by statemachine and helps to perform the replication.

Testing 

-> rpc_test.go  
This file contains the testing code in which 5 nodes gets started in the cluster and then different tests are performed by sending the commands to the client handler.

-> When the nodes are starting then leader elections going on successfully and after that when the client send the different types of command then some problem is coming due to which the test cases are failing.





 




